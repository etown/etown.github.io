<!DOCTYPE html>
<html>
<head>
<script>
var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {var r = Math.random()*16|0,v=c=='x'?r:r&0x3|0x8;return v.toString(16);});
 window.fbAsyncInit = function() {
    FB.init({
      appId      : '158679724544082',
      xfbml      : true,
      version    : 'v2.6'
    });
   FB.Event.subscribe('messenger_checkbox', function(e) {
      console.log("messenger_checkbox event");
      console.log(e);
      
      if (e.event == 'rendered') {
        console.log("Plugin was rendered");
      } else if (e.event == 'checkbox') {
        var checkboxState = e.state;
        console.log("Checkbox state: " + checkboxState);
      } else if (e.event == 'not_you') {
        console.log("User clicked 'not you'");
      } else if (e.event == 'hidden') {
        console.log("Plugin was hidden");
        FB.AppEvents.logEvent('MessengerCheckboxUserConfirmation', null, {
            'app_id':'158679724544082',
            'page_id':'1206454586039393',
            'ref':'PASS_THROUGH_PARAM',
            'user_ref': uuid
          });
      }
      
    });
  };

  (function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk')
  );
</script>      

</head>

<body>
  <script>  
document.write('<div class="fb-messenger-checkbox"    origin=https://etown.github.io  page_id=1206454586039393  messenger_app_id=158679724544082  user_ref='+uuid +'  prechecked="true"   allow_login="true"   size="large"></div>')   
</script>
</body>

</html>